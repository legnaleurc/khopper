# cue sheet plugin

find_package(Qt4 4.7 QUIET COMPONENTS QtNetwork)
set_package_properties(Qt4
    PROPERTIES
    TYPE OPTIONAL
    PURPOSE "Network is necessary for FreeDB query")

if(NOT QT_QTNETWORK_FOUND)
    return()
endif()

include(KhopperUtility)
include(${QT_USE_FILE})

file(GLOB_RECURSE KHOPPER_PLUGIN_CUESHEET_HEADERS RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} src/*.hpp)
file(GLOB_RECURSE KHOPPER_PLUGIN_CUESHEET_SOURCES RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} src/*.cpp)
file(GLOB_RECURSE KHOPPER_PLUGIN_CUESHEET_FORMS RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} src/*.ui)
group_sources("src")

include_directories(${CMAKE_CURRENT_BINARY_DIR})

find_moc_headers(KHOPPER_PLUGIN_CUESHEET_MOC_HEADERS ${KHOPPER_PLUGIN_CUESHEET_HEADERS})
qt4_wrap_cpp(KHOPPER_PLUGIN_CUESHEET_MOC_SOURCES ${KHOPPER_PLUGIN_CUESHEET_MOC_HEADERS})
qt4_wrap_ui(KHOPPER_PLUGIN_CUESHEET_UIC_HEADERS ${KHOPPER_PLUGIN_CUESHEET_FORMS})

source_group("Generated Files" FILES ${KHOPPER_PLUGIN_CUESHEET_MOC_SOURCES} ${KHOPPER_PLUGIN_CUESHEET_UIC_HEADERS})

add_library(khopper_plugin_cuesheet SHARED ${KHOPPER_PLUGIN_CUESHEET_HEADERS} ${KHOPPER_PLUGIN_CUESHEET_SOURCES} ${KHOPPER_PLUGIN_CUESHEET_MOC_SOURCES} ${KHOPPER_PLUGIN_CUESHEET_UIC_HEADERS})
target_link_libraries(khopper_plugin_cuesheet ${QT_QTNETWORK_LIBRARY})
khopper_add_plugin(khopper_plugin_cuesheet)
